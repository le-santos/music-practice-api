<nav class="bg-white border-b border-gray-200 shadow-sm">
  <div class="max-w-6xl mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <div class="flex-shrink-0">
        <%= link_to 'Music Practice Journal', root_path, class: 'text-lg md:text-xl font-bold text-indigo-600 hover:text-indigo-700' %>
      </div>

      <!-- Mobile menu button -->
      <button id="mobile-menu-btn" class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none">
        <%= render 'web/shared/menu_icon' %>
        <div id="close-icon-wrapper" class="hidden">
          <%= render 'web/shared/close_icon' %>
        </div>
      </button>

      <!-- Desktop menu -->
      <div class="hidden md:flex gap-4 items-center">
        <% if user_signed_in? %>
          <div class="flex gap-4">
            <%= link_to 'Musics', web_musics_path, class: 'text-gray-700 hover:text-indigo-600 font-medium transition' %>
            <%= link_to 'Practice Sessions', web_practice_sessions_path, class: 'text-gray-700 hover:text-indigo-600 font-medium transition' %>
          </div>
          <div class="border-l border-gray-200 pl-4 flex items-center gap-3">
            <span class="text-gray-600 text-sm"><%= current_user.email %></span>
            <%= link_to 'Sign Out', destroy_user_session_path, method: :delete, class: 'text-red-600 hover:text-red-700 font-medium transition' %>
          </div>
        <% else %>
          <div class="flex gap-4">
            <%= link_to 'Sign In', new_user_session_path, class: 'text-indigo-600 hover:text-indigo-700 font-medium transition' %>
            <%= link_to 'Register', new_user_registration_path, class: 'bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition' %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Mobile menu (hidden by default) -->
    <div id="mobile-menu" class="hidden md:hidden mt-2 space-y-2 pb-3">
      <% if user_signed_in? %>
        <%= link_to 'Musics', web_musics_path, class: 'block px-3 py-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-medium transition' %>
        <%= link_to 'Practice Sessions', web_practice_sessions_path, class: 'block px-3 py-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-medium transition' %>
        <div class="border-t border-gray-200 pt-2 mt-2">
          <span class="block px-3 py-2 text-gray-600 text-sm"><%= current_user.email %></span>
          <%= link_to 'Sign Out', destroy_user_session_path, method: :delete, class: 'block px-3 py-2 rounded-md text-red-600 hover:bg-red-50 font-medium transition' %>
        </div>
      <% else %>
        <%= link_to 'Sign In', new_user_session_path, class: 'block px-3 py-2 rounded-md text-indigo-600 hover:bg-indigo-50 font-medium transition' %>
        <%= link_to 'Register', new_user_registration_path, class: 'block px-3 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 font-medium text-center transition' %>
      <% end %>
    </div>
  </div>
</nav>

<script>
  document.getElementById('mobile-menu-btn').addEventListener('click', function() {
    const menu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    
    menu.classList.toggle('hidden');
    menuIcon.classList.toggle('hidden');
    closeIcon.classList.toggle('hidden');
  });
</script>
